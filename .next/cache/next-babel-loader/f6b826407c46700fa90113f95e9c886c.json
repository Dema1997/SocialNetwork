{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport styles from '../../styles/utils.module.css';\nimport Button from '@material-ui/core/Button';\nimport { useRouter } from 'next/router';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Link from 'next/link';\n\nconst User = ({\n  user\n}) => {\n  const router = useRouter();\n  const {\n    0: isDeleting,\n    1: setIsDeleting\n  } = useState(false);\n\n  const handleClick = () => {\n    setIsDeleting(!isDeleting);\n  };\n\n  useEffect(() => {\n    if (isDeleting) {\n      deleteUser();\n    }\n  }, [isDeleting]); //UserTruthy.js\n\n  const UserTruthy = () => /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: styles.userInfoId,\n      children: [/*#__PURE__*/_jsx(\"b\", {\n        children: /*#__PURE__*/_jsx(\"label\", {\n          children: \"Id\"\n        })\n      }), user._id]\n    }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.userInfo,\n      children: [/*#__PURE__*/_jsx(\"b\", {\n        children: /*#__PURE__*/_jsx(\"label\", {\n          children: \"Email\"\n        })\n      }), /*#__PURE__*/_jsx(\"label\", {\n        children: user.email\n      }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"b\", {\n        children: /*#__PURE__*/_jsx(\"label\", {\n          children: \"Full Name\"\n        })\n      }), /*#__PURE__*/_jsxs(\"label\", {\n        children: [user.firstName, \"\\xA0\", user.lastName]\n      }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"b\", {\n        children: /*#__PURE__*/_jsx(\"label\", {\n          children: \"Birth Date\"\n        })\n      }), \" \", /*#__PURE__*/_jsx(\"label\", {\n        children: user.date\n      }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"b\", {\n        children: /*#__PURE__*/_jsx(\"label\", {\n          children: \"City\"\n        })\n      }), /*#__PURE__*/_jsx(\"label\", {\n        children: user.city\n      }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"b\", {\n        children: /*#__PURE__*/_jsx(\"label\", {\n          children: \"Address\"\n        })\n      }), /*#__PURE__*/_jsx(\"label\", {\n        children: user.address\n      }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Button, {\n        style: {\n          fontSize: 13\n        },\n        startIcon: /*#__PURE__*/_jsx(DeleteIcon, {}),\n        variant: \"contained\",\n        color: \"secondary\",\n        onClick: handleClick,\n        children: \"Delete\"\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.backToHome,\n      style: {\n        marginTop: 15\n      },\n      children: /*#__PURE__*/_jsx(Link, {\n        href: \"/\",\n        children: /*#__PURE__*/_jsx(\"a\", {\n          style: {\n            marginLeft: 25\n          },\n          children: \"\\u2190 Back to home\"\n        })\n      })\n    })]\n  });\n\n  const deleteUser = async () => {\n    const id = router.query.id;\n\n    try {\n      const deleted = await fetch(`http://localhost:3000/api/users/${id}`, {\n        method: 'DELETE'\n      });\n      router.push(\"/Users\");\n    } catch (error) {\n      console.log(\"Error:\", error);\n    }\n  };\n\n  return isDeleting ? /*#__PURE__*/_jsx(_Fragment, {}) : user ? /*#__PURE__*/_jsx(UserTruthy, {}) : /*#__PURE__*/_jsx(_Fragment, {\n    children: \"User is falsy\"\n  });\n};\n\nexport default User;\n\nUser.getInitialProps = async ctx => {\n  const {\n    id\n  } = ctx.query;\n  const res = await fetch(`http://localhost:3000/api/users/${id}`);\n  const {\n    data\n  } = await res.json();\n  /*\n  * Viene chiamata quando parte l'applicazione.\n  * E' un comportamento non desiderato\n  * Deve essere chiamata solo qusndo richiedo i dati di un utente.\n  */\n\n  return {\n    user: data\n  };\n};","map":null,"metadata":{},"sourceType":"module"}