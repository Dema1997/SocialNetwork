{"ast":null,"code":"import dbConnect from '../../../utils/dbConnect';\nimport User from '../../../models/User';\ndbConnect();\nexport default (async (req, res) => {\n  const {\n    query: {\n      id\n    },\n    method\n  } = req;\n\n  switch (method) {\n    case 'GET':\n      try {\n        const user = await User.findById(id);\n\n        if (!user) {\n          return res.status(400).json({\n            success: false\n          });\n        }\n\n        res.status(200).json({\n          success: true,\n          data: user\n        });\n      } catch (error) {\n        res.status(400).json({\n          success: false\n        });\n      }\n\n      break;\n\n    case 'PUT':\n      try {\n        const user = await User.findByIdAndUpdate(id, req.body, {\n          new: true,\n          runValidators: true\n        });\n\n        if (!user) {\n          return res.status(400).json({\n            success: false\n          });\n        }\n\n        res.status(200).json({\n          success: true,\n          data: user\n        });\n      } catch (error) {\n        res.status(400).json({\n          success: false\n        });\n      }\n\n      break;\n\n    case 'DELETE':\n      try {\n        const deletedUser = await User.deleteOne({\n          _id: id\n        });\n\n        if (!deletedUser) {\n          return res.status(400).json({\n            success: false\n          });\n        }\n\n        res.status(200).json({\n          success: true,\n          data: {}\n        });\n      } catch (error) {\n        res.status(400).json({\n          success: false\n        });\n      }\n\n      break;\n\n    default:\n      res.status(400).json({\n        success: false\n      });\n      break;\n  }\n});","map":{"version":3,"sources":["/Users/filippo/Desktop/Blog/Blog/pages/api/users/[id].js"],"names":["dbConnect","User","req","res","query","id","method","user","findById","status","json","success","data","error","findByIdAndUpdate","body","new","runValidators","deletedUser","deleteOne","_id"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,0BAAtB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AAEAD,SAAS;AAET,gBAAe,OAAOE,GAAP,EAAYC,GAAZ,KAAmB;AAC9B,QAAM;AACFC,IAAAA,KAAK,EAAE;AAAEC,MAAAA;AAAF,KADL;AAEFC,IAAAA;AAFE,MAGFJ,GAHJ;;AAKA,UAAOI,MAAP;AACI,SAAK,KAAL;AACI,UAAI;AACA,cAAMC,IAAI,GAAG,MAAMN,IAAI,CAACO,QAAL,CAAcH,EAAd,CAAnB;;AACA,YAAG,CAACE,IAAJ,EAAS;AACL,iBAAOJ,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,YAAAA,OAAO,EAAC;AAAV,WAArB,CAAP;AACH;;AACDR,QAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC,IAAT;AAAeC,UAAAA,IAAI,EAAEL;AAArB,SAArB;AACH,OAND,CAMC,OAAMM,KAAN,EAAY;AACTV,QAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC;AAAT,SAArB;AACH;;AACD;;AACJ,SAAK,KAAL;AACI,UAAG;AACC,cAAMJ,IAAI,GAAG,MAAMN,IAAI,CAACa,iBAAL,CAAuBT,EAAvB,EAA2BH,GAAG,CAACa,IAA/B,EAAqC;AACpDC,UAAAA,GAAG,EAAE,IAD+C;AAEpDC,UAAAA,aAAa,EAAE;AAFqC,SAArC,CAAnB;;AAIA,YAAG,CAACV,IAAJ,EAAS;AACL,iBAAOJ,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,YAAAA,OAAO,EAAE;AAAV,WAArB,CAAP;AACH;;AACDR,QAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC,IAAT;AAAeC,UAAAA,IAAI,EAACL;AAApB,SAArB;AACH,OATD,CASC,OAAMM,KAAN,EAAY;AACTV,QAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC;AAAT,SAArB;AACH;;AACD;;AACJ,SAAK,QAAL;AACI,UAAG;AACC,cAAMO,WAAW,GAAC,MAAMjB,IAAI,CAACkB,SAAL,CAAe;AAACC,UAAAA,GAAG,EAAEf;AAAN,SAAf,CAAxB;;AAEA,YAAG,CAACa,WAAJ,EAAgB;AACZ,iBAAOf,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,YAAAA,OAAO,EAAC;AAAT,WAArB,CAAP;AACH;;AACDR,QAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC,IAAT;AAAeC,UAAAA,IAAI,EAAC;AAApB,SAArB;AACH,OAPD,CAOC,OAAMC,KAAN,EAAY;AACTV,QAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC;AAAT,SAArB;AACH;;AACD;;AACJ;AACIR,MAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,QAAAA,OAAO,EAAC;AAAT,OAArB;AACA;AAxCR;AA0CH,CAhDD","sourcesContent":["import dbConnect from '../../../utils/dbConnect'\nimport User from '../../../models/User'\n\ndbConnect()\n\nexport default async (req, res) =>{\n    const {\n        query: { id },\n        method\n    } = req\n\n    switch(method) {\n        case 'GET':\n            try {\n                const user = await User.findById(id)\n                if(!user){\n                    return res.status(400).json({ success:false})\n                }\n                res.status(200).json({success:true, data: user})\n            }catch(error){\n                res.status(400).json({success:false})\n            }\n            break;\n        case 'PUT':\n            try{\n                const user = await User.findByIdAndUpdate(id, req.body, {\n                    new: true,\n                    runValidators: true\n                });\n                if(!user){\n                    return res.status(400).json({success: false})\n                }\n                res.status(200).json({success:true, data:user})\n            }catch(error){\n                res.status(400).json({success:false})\n            }\n            break;\n        case 'DELETE':\n            try{\n                const deletedUser=await User.deleteOne({_id: id})\n\n                if(!deletedUser){\n                    return res.status(400).json({success:false})\n                }\n                res.status(200).json({success:true, data:{}})\n            }catch(error){\n                res.status(400).json({success:false})\n            }\n            break;\n        default:\n            res.status(400).json({success:false})\n            break;\n    }\n}"]},"metadata":{},"sourceType":"module"}