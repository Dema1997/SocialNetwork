_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{RNiq:function(e,t,n){"use strict";n.r(t),n.d(t,"Login",(function(){return x}));var o=n("nKUr"),a=n("o0o1"),r=n.n(a),s=n("HaE+"),i=n("q1tI"),c=n("Z3vd"),l=n("bXiM"),j=n("r9w1"),u=n("nOHt"),b=n("Z4Yb"),d=n.n(b),h=n("R/WZ"),g=n("K6CT"),p=n.n(g),f=n("FLf1"),m=Object(h.a)({button:{textTransform:"none",letterSpacing:1.3,fontSize:14,fontWeight:400,marginTop:10,backgroundColor:"#2ea44f",color:"white"},textField:{marginTop:5,marginBottom:11},inputRoot:{height:1},label:{fontSize:14,fontWeight:600},titleLogin:{textAlign:"center",color:"white",fontWeight:300,letterSpacing:1,fontSize:19,marginTop:50,marginBottom:15},forgotPassword:{color:"#0366d6",fontSize:14,fontWeight:500},newToWhoPlays:{cursor:"pointer",fontSize:14}}),O=function(){var e=m(),t=Object(i.useState)(""),n=t[0],a=t[1],b=Object(i.useState)(""),h=b[0],g=b[1],O=Object(i.useState)(""),x=(O[0],O[1],Object(u.useRouter)());function w(){return(w=Object(s.a)(r.a.mark((function e(){var t,o,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/login",{method:"POST",body:JSON.stringify({email:n,password:h})}).then((function(e){return e.json()}));case 2:if(t=e.sent,o=t.token,console.log("Token generated: "+o),!o){e.next=14;break}return f.decode(o),e.next=9,fetch("api/secret",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o})}).then((function(e){return e.json()}));case 9:a=e.sent,console.log(a),x.push("/Home"),e.next=15;break;case 14:console.log("Error");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(l.a,{title:"Enter details"}),Object(o.jsxs)("div",{className:d.a.main,children:[Object(o.jsx)("h2",{className:e.titleLogin,children:"Sign in to"}),Object(o.jsx)(p.a,{href:"/",children:Object(o.jsx)("a",{children:Object(o.jsx)("img",{src:"/images/logow.png"})})}),Object(o.jsx)("br",{}),Object(o.jsxs)("form",{style:{backgroundColor:"#c5cbd3",padding:25,borderRadius:5},children:[Object(o.jsx)("label",{className:e.label,children:"Username or email address"}),Object(o.jsx)("br",{}),Object(o.jsx)(j.a,{className:e.textField,inputProps:{className:e.inputRoot},required:!0,variant:"outlined",name:"email",type:"email",value:n,onChange:function(e){a(e.target.value)}}),Object(o.jsx)("br",{}),Object(o.jsx)("label",{className:e.label,children:"Password"}),Object(o.jsx)("br",{}),Object(o.jsx)(j.a,{className:e.textField,inputProps:{className:e.inputRoot},required:!0,variant:"outlined",name:"password",type:"password",value:h,onChange:function(e){g(e.target.value)}}),Object(o.jsx)("br",{}),Object(o.jsx)("a",{className:e.forgotPassword,children:"Forgot password?"}),Object(o.jsx)("br",{}),Object(o.jsx)(c.a,{fullWidth:!0,onClick:function(){return w.apply(this,arguments)},className:e.button,label:"Log in",children:"Sign in"})]}),Object(o.jsxs)("p",{className:e.newToWhoPlays,children:["New to WhoPlays? ",Object(o.jsx)(p.a,{href:"/Signin",children:Object(o.jsx)("a",{children:"Create an account"})})]})]})]})},x=function(){return Object(o.jsx)(O,{})};t.default=x},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("RNiq")}])}},[["vlRD",0,1,2,3,4,6,7]]]);